<nav [user]="_session.user"></nav>
<reload></reload>
<div *ngIf="_session.user" class="form">
  <h1>{{_session.user.username}}'s Account</h1>
  <form (ngSubmit)="updateUser(user)">
    <div *ngIf="error" class="alert alert-error">
      {{error}}
    </div>
    <div *ngIf="success" class="alert alert-success">
      Account settings saved!
    </div>
    <div class="form-group">
      <label for="password">Password</label>
      <button class="btn btn-inline btn-yellow" type="button" (click)="togglePassword()">
        {{password ? 'Cancel' : 'Change'}}
      </button>
    </div>
    <div *ngIf="password" class="form-group">
      <input [(ngModel)]="user.password" name="password" id="password" type="password" required placeholder="••••••••••••">
      <i class="fa fa-asterisk"></i>
    </div>
    <div *ngIf="password" class="form-group">
      <input [(ngModel)]="user.password_confirm" name="password_confirm" id="password_confirm" type="password" required placeholder="••••••••••••">
      <i class="fa fa-asterisk"></i>
    </div>
    <div class="form-group">
      <label for="friend_code">Friend Code</label>
      <input [(ngModel)]="user.friend_code" name="friend_code" id="friend_code" type="text" placeholder="XXXX-XXXX-XXXX">
    </div>
    <div class="form-group">
      <label for="language">Pokémon Name Language</label>
      <select>
        <option>English</option>
      </select>
      <i class="fa fa-chevron-down"></i>
    </div>
    <button class="btn btn-blue" type="submit">
      <span [class.hidden]="loading">Save <i class="fa fa-long-arrow-right"></i></span>
      <span *ngIf="loading" class="spinner"><i class="fa fa-spinner fa-spin"></i></span>
    </button>
  </form>
</div>
